import{r as oe,b as ne,a as le,c as x,u as E,d as ie,N as ce,e as de,R as me,f as xe}from"./vendor-sGmgHiac.js";import{c as he}from"./supabase-CT8fK44Y.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();var B={exports:{}},L={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F;function ue(){if(F)return L;F=1;var s=oe(),t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function m(u,n,p){var i,N={},j=null,d=null;p!==void 0&&(j=""+p),n.key!==void 0&&(j=""+n.key),n.ref!==void 0&&(d=n.ref);for(i in n)l.call(n,i)&&!c.hasOwnProperty(i)&&(N[i]=n[i]);if(u&&u.defaultProps)for(i in n=u.defaultProps,n)N[i]===void 0&&(N[i]=n[i]);return{$$typeof:t,type:u,key:j,ref:d,props:N,_owner:r.current}}return L.Fragment=o,L.jsx=m,L.jsxs=m,L}var U;function pe(){return U||(U=1,B.exports=ue()),B.exports}var e=pe(),P={},J;function ge(){if(J)return P;J=1;var s=ne();return P.createRoot=s.createRoot,P.hydrateRoot=s.hydrateRoot,P}var fe=ge();const je=le(fe),Z="https://krisjvemfpnkmduebqdr.supabase.co",X="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtyaXNqdmVtZnBua21kdWVicWRyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0Nzg1NDkxMywiZXhwIjoyMDYzNDMwOTEzfQ.dLPLtL7146B8to-915av5R8ITZoE58VRl4N0AUKOEpA",y=he(Z,X);async function Ne(){try{console.log("🔗 Testando conexão com Supabase..."),console.log("📍 URL:",Z),console.log("🔑 Anon Key (primeiros 20 chars):",X?.substring(0,20)+"...");const{data:s,error:t}=await y.from("profiles").select("count").limit(1);console.log("📊 Teste de conexão com profiles:",{hasData:!!s,error:t?.message,errorCode:t?.code}),t&&console.error("❌ Erro ao conectar com profiles:",{message:t.message,code:t.code,hint:t.hint,details:t.details});const{data:{user:o},error:l}=await y.auth.getUser();return console.log("👤 Status de autenticação:",{isAuthenticated:!!o,userEmail:o?.email,authError:l?.message}),t||console.log("✅ Conexão com database bem-sucedida!"),!t}catch(s){return console.error("💥 Erro crítico na conexão:",{error:s,message:s instanceof Error?s.message:"Erro desconhecido"}),!1}}async function be(s,t){try{console.log("🔐 Tentando login com:",{email:s,password:t.substring(0,3)+"***",emailLength:s.length,passwordLength:t.length});const{data:o,error:l}=await y.auth.signInWithPassword({email:s.trim(),password:t.trim()});if(console.log("📊 Resposta da autenticação:",{hasAuthData:!!o,hasUser:!!o?.user,authError:l?.message,authErrorCode:l?.status||l?.code}),l||!o.user)return console.error("❌ Erro de autenticação detalhado:",{error:l,message:l?.message,status:l?.status,code:l?.code}),{user:null,error:l?.message||"Credenciais inválidas"};console.log("✅ Autenticação bem-sucedida, buscando perfil...",{userId:o.user.id,userEmail:o.user.email});const{data:r,error:c}=await y.from("profiles").select("*").eq("id",o.user.id).single();if(console.log("📋 Resposta do perfil:",{hasProfile:!!r,profileError:c?.message,profileData:r?{id:r.id,nome_completo:r.nome_completo,apelido:r.apelido,cargo:r.cargo}:null}),c)return console.error("❌ Erro ao buscar perfil detalhado:",{error:c,message:c.message,code:c.code,hint:c.hint}),{user:null,error:`Erro ao carregar dados do usuário: ${c.message}`};if(!r)return console.error("❌ Perfil não encontrado para o usuário"),{user:null,error:"Perfil do usuário não encontrado"};const m={id:o.user.id,email:o.user.email,nome:r.nome_completo,apelido:r.apelido,cargo:r.cargo,cod_vendedor:r.cod_vendedor,profile:r};return console.log("✅ Login bem-sucedido:",{email:m.email,nome:m.nome,apelido:m.apelido,cargo:m.cargo}),{user:m,error:null}}catch(o){return console.error("💥 Erro de conexão detalhado:",{error:o,message:o instanceof Error?o.message:"Erro desconhecido",stack:o instanceof Error?o.stack:void 0}),{user:null,error:"Erro na conexão"}}}async function ye(){try{const{error:s}=await y.auth.signOut();return s?(console.error("❌ Erro no logout:",s),{error:s.message}):{error:null}}catch(s){return console.error("💥 Erro no logout:",s),{error:"Erro na conexão"}}}async function ve(){try{const{data:{user:s},error:t}=await y.auth.getUser();if(t||!s)return{user:null,error:t?.message||null};const{data:o,error:l}=await y.from("profiles").select("*").eq("id",s.id).single();return l?(console.error("❌ Erro ao buscar perfil:",l),{user:null,error:"Erro ao carregar dados do usuário"}):{user:{id:s.id,email:s.email,nome:o.nome_completo,apelido:o.apelido,cargo:o.cargo,cod_vendedor:o.cod_vendedor,profile:o},error:null}}catch(s){return console.error("💥 Erro ao verificar usuário:",s),{user:null,error:"Erro na conexão"}}}async function we(){try{const{data:s,error:t}=await y.from("tabela_clientes").select("*");return t?(console.error("Erro ao buscar clientes:",t),{data:[],error:t.message}):{data:s,error:null}}catch(s){return console.error("Erro na conexão ao buscar clientes:",s),{data:[],error:"Erro na conexão"}}}async function _e(){try{const{data:s,error:t}=await y.from("rotas").select("*");return t?(console.error("Erro ao buscar rotas:",t),{data:[],error:t.message}):{data:s,error:null}}catch(s){return console.error("Erro na conexão ao buscar rotas:",s),{data:[],error:"Erro na conexão"}}}async function Ce(){try{const{data:s,error:t}=await y.from("cidades").select("*");return t?(console.error("Erro ao buscar cidades:",t),{data:[],error:t.message}):{data:s,error:null}}catch(s){return console.error("Erro na conexão ao buscar cidades:",s),{data:[],error:"Erro na conexão"}}}async function ke(){try{const{data:s,error:t}=await y.from("compras_produto_cliente").select("*");return t?(console.error("Erro ao buscar vendas:",t),{data:[],error:t.message}):{data:s,error:null}}catch(s){return console.error("Erro na conexão ao buscar vendas:",s),{data:[],error:"Erro na conexão"}}}async function Ee(s){try{const{data:t,error:o}=await y.from("profiles").select("*").eq("id",s).single();return o?(console.error("Erro ao buscar perfil:",o),{data:null,error:o.message}):{data:t,error:null}}catch(t){return console.error("Erro na conexão ao buscar perfil:",t),{data:null,error:"Erro na conexão"}}}const K=x.createContext(void 0),C=()=>{const s=x.useContext(K);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Re=({children:s})=>{const[t,o]=x.useState(null),[l,r]=x.useState(!0);x.useEffect(()=>{(async()=>{const{user:p,error:i}=await ve();p&&!i&&o(p),r(!1)})()},[]);const u={user:t,loading:l,login:async(n,p)=>{r(!0);try{const{user:i,error:N}=await be(n,p);return N||!i?(r(!1),{success:!1,error:N||"Erro desconhecido"}):(o(i),r(!1),{success:!0})}catch{return r(!1),{success:!1,error:"Erro na conexão"}}},logout:async()=>{r(!0);try{t?.profile?.cod_vendedor&&localStorage.removeItem(`vendedor_${t.profile.cod_vendedor}`),await ye(),o(null)}catch(n){console.error("Erro no logout:",n)}finally{r(!1)}}};return e.jsx(K.Provider,{value:u,children:s})},G=x.createContext(void 0),M=()=>{const s=x.useContext(G);if(s===void 0)throw new Error("useUserData must be used within a UserDataProvider");return s},R=({children:s})=>{const{user:t}=C(),[o,l]=x.useState({profile:null,clientes:[],rotas:[],cidades:[],vendas:[]}),[r,c]=x.useState(!1),[m,u]=x.useState(null),n=async d=>{c(!0),u(null);const f={profile:null,clientes:[],rotas:[],cidades:[],vendas:[]};try{const{data:g,error:v}=await Ee(d);if(v)throw new Error(`Erro ao carregar perfil: ${v}`);f.profile=g;const w=[{key:"clientes",fn:we},{key:"rotas",fn:_e},{key:"cidades",fn:Ce},{key:"vendas",fn:ke}];for(const{key:h,fn:k}of w)try{const{data:_,error:A}=await k();A?(console.warn(`Erro ao carregar ${h}:`,A),f[h]=[]):f[h]=_||[]}catch(_){console.warn(`Erro ao carregar ${h}:`,_),f[h]=[]}const a=`userData_${d}`;localStorage.setItem(a,JSON.stringify({...f,loadedAt:new Date().toISOString()})),l(f)}catch(g){console.error("Erro ao carregar dados:",g),u(g instanceof Error?g.message:"Erro desconhecido")}finally{c(!1)}};x.useEffect(()=>{if(t?.id){const d=`userData_${t.id}`,f=localStorage.getItem(d);if(f)try{const g=JSON.parse(f);l(g)}catch(g){console.warn("Erro ao carregar cache:",g),n(t.id)}else n(t.id)}else l({profile:null,clientes:[],rotas:[],cidades:[],vendas:[]}),u(null)},[t?.id]);const p=d=>Array.isArray(o[d])?o[d].length>0:o[d]!==null,i=()=>{t?.id&&n(t.id)},N=()=>{if(t?.id){const d=`userData_${t.id}`;localStorage.removeItem(d)}l({profile:null,clientes:[],rotas:[],cidades:[],vendas:[]}),u(null)},j={profile:o.profile,clientes:o.clientes,rotas:o.rotas,cidades:o.cidades,vendas:o.vendas,loading:r,error:m,hasData:p,refresh:i,clear:N};return e.jsx(G.Provider,{value:j,children:s})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Me=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,l)=>l?l.toUpperCase():o.toLowerCase()),W=s=>{const t=Me(s);return t.charAt(0).toUpperCase()+t.slice(1)},H=(...s)=>s.filter((t,o,l)=>!!t&&t.trim()!==""&&l.indexOf(t)===o).join(" ").trim(),$e=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=x.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:r="",children:c,iconNode:m,...u},n)=>x.createElement("svg",{ref:n,...qe,width:t,height:t,stroke:s,strokeWidth:l?Number(o)*24/Number(t):o,className:H("lucide",r),...!c&&!$e(u)&&{"aria-hidden":"true"},...u},[...m.map(([p,i])=>x.createElement(p,i)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=(s,t)=>{const o=x.forwardRef(({className:l,...r},c)=>x.createElement(Le,{ref:c,iconNode:t,className:H(`lucide-${Se(W(s))}`,`lucide-${s}`,l),...r}));return o.displayName=W(s),o};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],D=b("arrow-left",De);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Q=b("building",Ae);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],T=b("chevron-down",Pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],I=b("chevron-up",Te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Y=b("circle-alert",Ie);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Oe=b("eye-off",Ve);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Be=b("eye",ze);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ee=b("funnel",Fe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Je=b("log-in",Ue);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$=b("log-out",We);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],se=b("map-pin",Ze);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Ke=b("map",Xe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],te=b("message-circle",Ge);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Qe=b("mic",He);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],re=b("phone",Ye);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],z=b("search",es);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ts=b("target",ss);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],as=b("trending-up",rs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O=b("triangle-alert",os);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],q=b("user",ns),ls="/assets/Logo%20Focco%20Brasil-DXXX8y_m.png",is=()=>{const[s,t]=x.useState(""),[o,l]=x.useState(""),[r,c]=x.useState(!1),[m,u]=x.useState(""),[n,p]=x.useState(!1),i=E(),{login:N,user:j}=C();x.useEffect(()=>{j&&i("/dashboard")},[j,i]),x.useEffect(()=>{Ne()},[]);const d=async f=>{f.preventDefault(),u(""),p(!0),console.log("🔑 Iniciando processo de login..."),console.log("👤 Email:",s),console.log("🔒 Senha tem",o.length,"caracteres");try{const g=await N(s,o);console.log("📋 Resultado do login:",g),g.success?(console.log("✅ Login bem-sucedido, redirecionando..."),i("/dashboard")):(console.error("❌ Falha no login:",g.error),u(g.error||"Erro desconhecido"))}catch(g){console.error("💥 Erro crítico:",g),u("Erro na conexão com o servidor")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:ls,alt:"Focco Brasil",className:"w-15 h-10 mb-4 mx-auto"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary mb-2",children:"Bem-vindo"}),e.jsx("p",{className:"text-gray-600",children:"Acesse sua plataforma de vendas"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),e.jsx("input",{type:"email",value:s,onChange:f=>t(f.target.value),placeholder:"seu.email@empresa.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",required:!0,disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r?"text":"password",value:o,onChange:f=>l(f.target.value),placeholder:"••••••••",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-12",required:!0,disabled:n}),e.jsx("button",{type:"button",onClick:()=>c(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:r?e.jsx(Oe,{size:20}):e.jsx(Be,{size:20})})]})]}),m&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-red-700 text-sm",children:m})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{size:20}),"Entrar no Sistema"]})})]}),e.jsx("div",{className:"text-center mt-8 text-sm text-gray-500",children:e.jsx("p",{children:"Plataforma de Gestão Comercial"})})]})})},cs=()=>{const s=E(),{user:t,logout:o}=C();M();const[l,r]=x.useState(null),[c,m]=x.useState(null),u=[{nome:"Ótica Visão Perfeita",rota:"Centro",meta:2e5,vendido:18e4,percentual:90},{nome:"Ótica Foco",rota:"Norte",meta:17e4,vendido:15e4,percentual:88},{nome:"Ótica Olhar Certo",rota:"Sul",meta:15e4,vendido:13e4,percentual:87},{nome:"Ótica Visão Global",rota:"Leste",meta:14e4,vendido:12e4,percentual:86},{nome:"Ótica Visão & Cia",rota:"Centro",meta:13e4,vendido:11e4,percentual:85},{nome:"Ótica Moderna",rota:"Norte",meta:12e4,vendido:105e3,percentual:88},{nome:"Ótica Prime",rota:"Sul",meta:11e4,vendido:95e3,percentual:86},{nome:"Ótica Central",rota:"Leste",meta:1e5,vendido:85e3,percentual:85},{nome:"Ótica Ideal",rota:"Centro",meta:95e3,vendido:8e4,percentual:84},{nome:"Ótica Plus",rota:"Norte",meta:9e4,vendido:75e3,percentual:83},{nome:"Ótica Master",rota:"Sul",meta:85e3,vendido:7e4,percentual:82},{nome:"Ótica Elite",rota:"Leste",meta:8e4,vendido:65e3,percentual:81},{nome:"Ótica Top",rota:"Centro",meta:75e3,vendido:6e4,percentual:80},{nome:"Ótica Nova",rota:"Norte",meta:7e4,vendido:55e3,percentual:79},{nome:"Ótica Class",rota:"Sul",meta:65e3,vendido:5e4,percentual:77},{nome:"Ótica Style",rota:"Leste",meta:6e4,vendido:45e3,percentual:75},{nome:"Ótica Trend",rota:"Centro",meta:55e3,vendido:4e4,percentual:73},{nome:"Ótica Flash",rota:"Norte",meta:5e4,vendido:35e3,percentual:70},{nome:"Ótica Smart",rota:"Sul",meta:45e3,vendido:3e4,percentual:67},{nome:"Ótica Pro",rota:"Leste",meta:4e4,vendido:25e3,percentual:63}],n=x.useMemo(()=>{let d=[...u];return l?d.sort((g,v)=>l==="asc"?g.rota.localeCompare(v.rota):v.rota.localeCompare(g.rota)):c&&d.sort((g,v)=>c==="asc"?g.percentual-v.percentual:v.percentual-g.percentual),d.map(g=>{const v=u.sort((w,a)=>a.percentual-w.percentual).findIndex(w=>w.nome===g.nome)+1;return{...g,posicao:v}})},[l,c]),p=()=>{m(null),r(l===null?"asc":l==="asc"?"desc":null)},i=()=>{r(null),m(c===null?"desc":c==="desc"?"asc":null)},N=()=>{o(),s("/")},j={oticasPositivadas:15,oticasPositivadasAnterior:12,semVendas90d:3};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-primary text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-14 relative",children:[e.jsx("div",{className:"flex items-center"}),e.jsx("div",{className:"flex items-center absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-lg font-bold",children:"Copiloto"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t?.apelido||t?.nome||t?.email||"Usuário"})]}),e.jsx("button",{onClick:N,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx($,{className:"h-4 w-4"})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 lg:py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Pessoal"}),e.jsxs("p",{className:"text-gray-600",children:["Bem-vindo, ",t?.apelido||t?.nome||t?.email||"Usuário","! Aqui estão suas métricas"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("button",{onClick:()=>s("/inadimplentes"),className:"bg-red-600 text-white p-2 sm:px-4 sm:py-2 rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center",children:e.jsx(O,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("button",{onClick:()=>s("/rotas"),className:"bg-primary text-white p-2 sm:px-4 sm:py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors flex items-center justify-center",children:e.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Vendas do Mês"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:"R$ 125.000,00"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Anterior: R$ 100.000,00"})]}),e.jsx("div",{className:"bg-blue-50 p-2 rounded-full",children:e.jsx(as,{className:"h-5 w-5 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Óticas Positivadas"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[j.oticasPositivadas," ","óticas"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Anterior: ",j.oticasPositivadasAnterior," ","óticas"]})]}),e.jsx("div",{className:"bg-green-50 p-2 rounded-full",children:e.jsx(Q,{className:"h-5 w-5 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Meta"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:"83%"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Anterior: 75%"})]}),e.jsx("div",{className:"bg-yellow-50 p-2 rounded-full",children:e.jsx(ts,{className:"h-5 w-5 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Sem Vendas +90d"}),e.jsxs("p",{className:"text-xl font-bold text-red-600 mt-1",children:[j.semVendas90d," ","óticas"]})]}),e.jsx("div",{className:"bg-red-50 p-2 rounded-full",children:e.jsx(O,{className:"h-5 w-5 text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-map-pin h-5 w-5 text-primary mr-2","aria-hidden":"true",children:[e.jsx("path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top 10 Cidades"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#1"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Fortaleza"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 450.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#2"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Caucaia"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 280.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#3"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Maracanaú"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 250.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#4"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Sobral"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 220.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#5"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Juazeiro do Norte"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 200.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#6"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Crato"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 180.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#7"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Iguatu"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 160.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#8"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Quixadá"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 140.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#9"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Canindé"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 120.000,00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 w-6",children:"#10"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Ceará-Mirim"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"R$ 100.000,00"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-building h-5 w-5 text-primary mr-2","aria-hidden":"true",children:[e.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 22v-4h6v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M16 10h.01"}),e.jsx("path",{d:"M16 14h.01"}),e.jsx("path",{d:"M8 10h.01"}),e.jsx("path",{d:"M8 14h.01"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top 20 Clientes"})]}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs font-semibold text-gray-600 border-b border-gray-200 pb-2 mb-2",children:[e.jsx("div",{className:"text-left",children:"Cliente"}),e.jsxs("div",{className:"text-center flex items-center justify-center",children:[e.jsx("span",{children:"Rota"}),e.jsx("button",{onClick:p,className:"ml-1 p-0.5 hover:bg-gray-100 rounded transition-colors",children:l==="asc"?e.jsx(I,{className:"h-3 w-3"}):l==="desc"?e.jsx(T,{className:"h-3 w-3"}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(I,{className:"h-2 w-2 -mb-0.5"}),e.jsx(T,{className:"h-2 w-2"})]})})]}),e.jsxs("div",{className:"text-center flex items-center justify-center",children:[e.jsx("span",{children:"Meta x Vendido"}),e.jsx("button",{onClick:i,className:"ml-1 p-0.5 hover:bg-gray-100 rounded transition-colors",children:c==="desc"?e.jsx(T,{className:"h-3 w-3"}):c==="asc"?e.jsx(I,{className:"h-3 w-3"}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(I,{className:"h-2 w-2 -mb-0.5"}),e.jsx(T,{className:"h-2 w-2"})]})})]})]}),n.map(d=>e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs items-center py-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"font-medium text-gray-500 w-6",children:["#",d.posicao]}),e.jsx("span",{className:"font-medium text-gray-900 truncate",children:d.nome})]}),e.jsx("div",{className:"text-center text-gray-600",children:d.rota}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"w-full bg-gray-200 rounded h-6 sm:h-5 relative",children:[e.jsx("div",{className:"bg-primary h-6 sm:h-5 rounded transition-all duration-300",style:{width:`${d.percentual}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-2 sm:px-4",children:e.jsxs("span",{className:"text-[9px] sm:text-[10px] text-white font-medium tracking-tight",children:[e.jsxs("span",{className:"hidden xs:inline",children:[d.meta.toLocaleString("pt-BR")," | ",d.vendido.toLocaleString("pt-BR")," | "]}),d.percentual,"%"]})})]})})]},d.nome))]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-target h-5 w-5 text-primary mr-2","aria-hidden":"true",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ranking Rotas"})]}),e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between mb-2 px-8 sm:px-12",children:[e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-500",children:"0"}),e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-500",children:"100k"}),e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-500",children:"200k"}),e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-500",children:"300k"}),e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-500",children:"400k"}),e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-500",children:"500k"})]}),e.jsxs("div",{className:"absolute top-5 left-8 sm:left-12 right-2 sm:right-4 h-24 sm:h-32 pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 chart-grid-line-0"}),e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 chart-grid-line-20"}),e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 chart-grid-line-40"}),e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 chart-grid-line-60"}),e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 chart-grid-line-80"}),e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 chart-grid-line-100"})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3 pl-8 sm:pl-12 pr-2 sm:pr-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 sm:w-12 text-right pr-1 sm:pr-2",children:e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-700 font-medium",children:"Centro"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs("div",{className:"h-4 sm:h-5 bg-gray-200 rounded relative chart-bar-full",children:[e.jsx("div",{className:"h-4 sm:h-5 bg-primary rounded transition-all duration-300 relative flex items-center justify-center chart-progress-90",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-white font-medium",children:"90%"})}),e.jsx("div",{className:"absolute right-0.5 sm:right-1 top-0 h-4 sm:h-5 flex items-center",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-gray-600 font-medium",children:e.jsx("span",{className:"hidden sm:inline",children:"450k/500k"})})})]})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 sm:w-12 text-right pr-1 sm:pr-2",children:e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-700 font-medium",children:"Norte"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs("div",{className:"h-4 sm:h-5 bg-gray-200 rounded relative chart-bar-80",children:[e.jsx("div",{className:"h-4 sm:h-5 bg-primary rounded transition-all duration-300 relative flex items-center justify-center chart-progress-80",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-white font-medium",children:"80%"})}),e.jsx("div",{className:"absolute right-0.5 sm:right-1 top-0 h-4 sm:h-5 flex items-center",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-gray-600 font-medium",children:e.jsx("span",{className:"hidden sm:inline",children:"320k/400k"})})})]})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 sm:w-12 text-right pr-1 sm:pr-2",children:e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-700 font-medium",children:"Sul"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs("div",{className:"h-4 sm:h-5 bg-gray-200 rounded relative chart-bar-90",children:[e.jsx("div",{className:"h-4 sm:h-5 bg-primary rounded transition-all duration-300 relative flex items-center justify-center chart-progress-70",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-white font-medium",children:"70%"})}),e.jsx("div",{className:"absolute right-0.5 sm:right-1 top-0 h-4 sm:h-5 flex items-center",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-gray-600 font-medium",children:e.jsx("span",{className:"hidden sm:inline",children:"315k/450k"})})})]})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 sm:w-12 text-right pr-1 sm:pr-2",children:e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-700 font-medium",children:"Leste"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs("div",{className:"h-4 sm:h-5 bg-gray-200 rounded relative chart-bar-70",children:[e.jsx("div",{className:"h-4 sm:h-5 bg-primary rounded transition-all duration-300 relative flex items-center justify-center chart-progress-60",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-white font-medium",children:"60%"})}),e.jsx("div",{className:"absolute right-0.5 sm:right-1 top-0 h-4 sm:h-5 flex items-center",children:e.jsx("span",{className:"text-[7px] sm:text-[8px] text-gray-600 font-medium",children:e.jsx("span",{className:"hidden sm:inline",children:"210k/350k"})})})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-center mt-2 sm:mt-3 space-x-3 sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-gray-200 rounded mr-1"}),e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-600",children:"Meta"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-primary rounded mr-1"}),e.jsx("span",{className:"text-[8px] sm:text-[9px] text-gray-600",children:"Vendido"})]})]})]})})]})]})]})};async function ds(s){let t=y.from("vw_clientes_completo").select(`
      codigo_cliente,
      nome_fantasia,
      status_financeiro,
      dias_sem_comprar,
      oportunidade,
      meta_2025,
      valor_vendas_2025,
      valor_limite_credito,
      bairro,
      acao_recomendada,
      rota,
      cidade,
      percentual_atingimento,
      estrelas
    `).order("nome_fantasia");if(s){const{data:r}=await y.from("vendedor_rotas").select("rota").eq("vendedor_id",s).eq("ativo",!0);if(r&&r.length>0){const c=r.map(m=>m.rota);t=t.in("rota",c)}}const{data:o,error:l}=await t;if(l)throw console.error("Erro ao buscar clientes:",l),l;return o||[]}function ms(s){if(!s)return"bg-gray-50";const t=s.toLowerCase();return t.includes("urgente")||t.includes("bloqueio")||t.includes("vai perder")||t.includes("cobrança")||t.includes("última tentativa")||t.includes("resolver situação")?"bg-red-50 border-red-200":t.includes("reconquistar")||t.includes("aumentar frequência")||t.includes("reativar")||t.includes("desenvolver")||t.includes("ação de reativação")||t.includes("avaliar manutenção")?"bg-yellow-50 border-yellow-200":t.includes("manter")||t.includes("foco total")||t.includes("foco em")||t.includes("primeira venda")?"bg-green-50 border-green-200":"bg-gray-50"}const xs=()=>{const s=E(),{user:t,logout:o}=C();M();const[l,r]=x.useState([]),[c,m]=x.useState(!0),[u,n]=x.useState(!1),p=x.useRef(null),[i,N]=x.useState(""),[j,d]=x.useState("nome");x.useEffect(()=>{const a=h=>{p.current&&!p.current.contains(h.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),x.useEffect(()=>{f()},[t]);async function f(){try{m(!0);const a=await ds(t?.id);console.log("Dados carregados:",a),console.log("Primeiro cliente:",a[0]),r(a)}catch(a){console.error("Erro ao carregar clientes:",a)}finally{m(!1)}}const g=a=>a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").toLowerCase().trim(),v=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0),w=l.filter(a=>{const h=g(i);return g(a.nome_fantasia).includes(h)||g(a.codigo_cliente.toString()).includes(h)}).sort((a,h)=>{switch(j){case"bairro-az":return(a.bairro||"").localeCompare(h.bairro||"");case"bairro-za":return(h.bairro||"").localeCompare(a.bairro||"");case"maior-oportunidade":return(h.oportunidade||0)-(a.oportunidade||0);case"menor-oportunidade":return(a.oportunidade||0)-(h.oportunidade||0);case"dsv":return(h.dias_sem_comprar||0)-(a.dias_sem_comprar||0);default:return a.nome_fantasia.localeCompare(h.nome_fantasia)}});return c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando clientes..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-primary text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-14 relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>s("/cidades"),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors mr-2",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex items-center absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-lg font-bold",children:"Copiloto"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t?.apelido||t?.nome||t?.email||"Usuário"})]}),e.jsx("button",{onClick:()=>{o(),s("/")},className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx($,{className:"h-4 w-4"})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 lg:py-8",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar Óticas...",value:i,onChange:a=>N(a.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"relative flex-shrink-0",ref:p,children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",onClick:()=>n(!u),children:e.jsx(ee,{className:"h-4 w-4 text-gray-600"})}),u&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-36",children:[e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{d("bairro-az"),n(!1)},children:"A-Z"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{d("bairro-za"),n(!1)},children:"Z-A"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{d("bairro"),n(!1)},children:"Bairro"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{d("maior-oportunidade"),n(!1)},children:"Maior Oport"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50",onClick:()=>{d("menor-oportunidade"),n(!1)},children:"Menor Oport"})]})]})]}),e.jsx("div",{className:"space-y-3",children:w.map(a=>{const h=ms(a.acao_recomendada);return e.jsx("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer ${h}`,onClick:()=>{console.log("Clicou no cliente:",a.codigo_cliente),console.log("Navegando para:",`/clientes/detalhes/${a.codigo_cliente}`),s(`/clientes/detalhes/${a.codigo_cliente}`)},children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:a.nome_fantasia}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${a.status_financeiro==="INADIMPLENTE"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:a.status_financeiro})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"DSV:"}),e.jsxs("span",{className:"text-xs font-semibold text-red-600",children:[a.dias_sem_comprar||0,"d"]})]})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2 leading-tight",children:["Código: ",a.codigo_cliente]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs leading-tight",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600",children:"Oportunidade:"}),e.jsx("span",{className:"ml-1 font-semibold text-green-700",children:v(a.oportunidade)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-600",children:"Limit Créd:"}),e.jsx("span",{className:"ml-1 font-semibold text-gray-800",children:v(a.valor_limite_credito)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"Meta:"}),e.jsx("span",{className:"ml-1 font-semibold text-blue-700",children:v(a.meta_2025)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-600",children:"Bairro:"}),e.jsx("span",{className:"ml-1 font-semibold text-gray-800",children:a.bairro||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Vendido:"}),e.jsx("span",{className:"ml-1 font-semibold text-purple-700",children:v(a.valor_vendas_2025)})]}),e.jsx("div",{})]}),a.acao_recomendada&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Y,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-gray-600"}),e.jsx("p",{className:"text-xs font-medium text-gray-900 leading-tight",children:a.acao_recomendada})]})})]})},a.codigo_cliente)})}),w.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:"Nenhum cliente encontrado"}),e.jsx("p",{className:"text-sm",children:"Tente ajustar os filtros para encontrar os clientes desejados."})]})]})]})},hs=()=>{const s=E(),{user:t,logout:o}=C();M();const[l,r]=x.useState(""),c=n=>n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").toLowerCase().trim(),u=[{id:1,nome:"Rota Centro",oportunidade:"R$ 10.573,00",cidades:5,oticas:25,semVendas90d:2},{id:2,nome:"Rota Norte",oportunidade:"R$ 8.250,00",cidades:3,oticas:15,semVendas90d:1},{id:3,nome:"Rota Sul",oportunidade:"R$ 12.800,00",cidades:4,oticas:20,semVendas90d:0},{id:4,nome:"Rota Leste",oportunidade:"R$ 15.400,00",cidades:6,oticas:30,semVendas90d:3}].filter(n=>{const p=c(l);return c(n.nome).includes(p)});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-primary text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-14 relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>s("/dashboard"),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors mr-2",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex items-center absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-lg font-bold",children:"Copiloto"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t?.apelido||t?.nome||t?.email||"Usuário"})]}),e.jsx("button",{onClick:()=>{o(),s("/")},className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx($,{className:"h-4 w-4"})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 lg:py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar rotas...",value:l,onChange:n=>r(n.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})}),e.jsx("div",{className:"space-y-3",children:u.map(n=>e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer",onClick:()=>s("/cidades"),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1.5",children:[e.jsx(se,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:n.nome})]}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs leading-tight",children:[e.jsx("div",{children:e.jsx("span",{className:"text-green-600",children:"Oportunidade:"})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-semibold text-green-700",children:n.oportunidade})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"Cidades:"}),e.jsx("span",{className:"font-semibold text-blue-700 ml-1",children:n.cidades})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-purple-600",children:"Óticas:"}),e.jsx("span",{className:"font-semibold text-purple-700 ml-1",children:n.oticas})]}),e.jsx("div",{children:e.jsx("span",{className:"text-red-600",children:"Sem Vendas +90d:"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"font-semibold text-red-700",children:[n.semVendas90d," ",n.semVendas90d===1?"ótica":"óticas"]})})]})]})})},n.id))})]})]})},us=()=>{const s=E(),{user:t,logout:o}=C();M();const[l,r]=x.useState(""),c=n=>n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").toLowerCase().trim(),u=[{id:1,nome:"Fortaleza",somaOportunidade:"R$ 7.300,00",saldoMetas:"R$ 13.500,00",nLojas:12,semVendas90d:2,indicadores:{at:2,inad:1,in:1}},{id:2,nome:"Caucaia",somaOportunidade:"R$ 5.200,00",saldoMetas:"R$ 8.000,00",nLojas:8,semVendas90d:1,indicadores:{at:1,inad:2,in:0}},{id:3,nome:"Maracanaú",somaOportunidade:"R$ 4.100,00",saldoMetas:"R$ 6.000,00",nLojas:6,semVendas90d:0,indicadores:{at:3,inad:1,in:0}},{id:4,nome:"Eusébio",somaOportunidade:"R$ 3.200,00",saldoMetas:"R$ 4.500,00",nLojas:4,semVendas90d:1,indicadores:{at:2,inad:0,in:1}}].filter(n=>{const p=c(l);return c(n.nome).includes(p)});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-primary text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-14 relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>s("/rotas"),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors mr-2",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex items-center absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-lg font-bold",children:"Copiloto"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t?.apelido||t?.nome||t?.email||"Usuário"})]}),e.jsx("button",{onClick:()=>{o(),s("/")},className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx($,{className:"h-4 w-4"})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar cidades...",value:l,onChange:n=>r(n.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})}),e.jsx("div",{className:"space-y-3",children:u.map(n=>e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer",onClick:()=>s("/clientes"),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1.5",children:[e.jsx(se,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:n.nome}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[n.nLojas," óticas"]})]})]}),e.jsx("div",{className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs leading-tight mb-2",children:[e.jsx("span",{className:"text-green-600",children:"Soma Oportunidade:"}),e.jsx("p",{className:"font-semibold text-green-700 text-right",children:n.somaOportunidade}),e.jsx("span",{className:"text-blue-600",children:"Saldo de Metas:"}),e.jsx("p",{className:"font-semibold text-blue-700 text-right",children:n.saldoMetas}),e.jsx("span",{className:"text-red-600",children:"Sem Vendas +90d:"}),e.jsxs("p",{className:"font-semibold text-red-700 text-right",children:[n.semVendas90d," ",n.semVendas90d===1?"ótica":"óticas"]}),e.jsx("span",{className:"text-purple-600",children:"N Lojas:"}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-gray-600",children:[n.indicadores.at," AT"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsxs("span",{className:"text-gray-600",children:[n.indicadores.inad," PEN"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("span",{className:"text-gray-600",children:[n.indicadores.in," INA"]})]})]})]})]})})},n.id))})]})]})};async function ps(s){try{const{data:t,error:o}=await y.from("vw_clientes_completo").select("*").eq("codigo_cliente",s).single();if(o)throw o;const{data:l}=await y.from("tabela_clientes").select("celular").eq("codigo_cliente",s).single();console.log("1️⃣ Chamando RPC com código:",s);const{data:r,error:c}=await y.rpc("get_cliente_detalhes",{p_codigo_cliente:s}).single();console.log("2️⃣ Resposta do Supabase:",{data:r,error:c}),console.log("3️⃣ Valores específicos:",{qtd_2024:r?.qtd_compras_2024,qtd_2025:r?.qtd_compras_2025,tipo_qtd_2024:typeof r?.qtd_compras_2024,tipo_qtd_2025:typeof r?.qtd_compras_2025,qtd_2024_exato:JSON.stringify(r?.qtd_compras_2024),qtd_2025_exato:JSON.stringify(r?.qtd_compras_2025)}),console.log("4️⃣ Dados da RPC COMPLETOS:",JSON.stringify(r,null,2));const{data:m}=await y.from("vw_metricas_categoria_cliente").select("*").eq("codigo_cliente",s).single(),u={...t,qtd_compras_2024:r?.qtd_compras_2024??0,qtd_compras_2025:r?.qtd_compras_2025??0,celular:l?.celular||"",produtos_comprados:r?.produtos_comprados||[],rx_fem_ob:m?.rx_fem_ob||0,rx_fem_pw:m?.rx_fem_pw||0,rx_mas_ob:m?.rx_mas_ob||0,rx_mas_pw:m?.rx_mas_pw||0,sol_fem_ob:m?.sol_fem_ob||0,sol_fem_pw:m?.sol_fem_pw||0,sol_mas_ob:m?.sol_mas_ob||0,sol_mas_pw:m?.sol_mas_pw||0};return console.log("5️⃣ DEBUG FINAL - qtd no clienteCompleto:",{qtd_2024_final:u.qtd_compras_2024,qtd_2025_final:u.qtd_compras_2025}),u}catch(t){throw console.error("Erro ao buscar detalhes do cliente:",t),t}}const V=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s||0),gs=s=>`${Math.round(s||0)}%`,fs=s=>{if(!s)return"";const t=s.replace(/\D/g,"");return t.length===11?`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7)}`:s};function js(s){if(!s)return{categorias:[],totais:{ob:0,pw:0}};const t=[{nome:"RX Feminino",ob:s.rx_fem_ob||0,pw:s.rx_fem_pw||0},{nome:"RX Masculino",ob:s.rx_mas_ob||0,pw:s.rx_mas_pw||0},{nome:"SOL Feminino",ob:s.sol_fem_ob||0,pw:s.sol_fem_pw||0},{nome:"SOL Masculino",ob:s.sol_mas_ob||0,pw:s.sol_mas_pw||0}],o={ob:(s.rx_fem_ob||0)+(s.rx_mas_ob||0)+(s.sol_fem_ob||0)+(s.sol_mas_ob||0),pw:(s.rx_fem_pw||0)+(s.rx_mas_pw||0)+(s.sol_fem_pw||0)+(s.sol_mas_pw||0)};return{categorias:t,totais:o}}const Ns=()=>{const s=E(),{user:t,logout:o}=C();M();const{id:l}=ie(),[r,c]=x.useState(null),[m,u]=x.useState(!0),[n,p]=x.useState(null);if(x.useEffect(()=>{async function j(){if(!l){console.log("❌ ID não fornecido");return}console.log("🔍 Carregando cliente com ID:",l);try{u(!0),console.log("📞 Chamando getClienteDetalhes com ID:",parseInt(l));const d=await ps(parseInt(l));console.log("✅ Dados recebidos:",d),c(d),console.log("🔍 DEBUG - Dados carregados:",{codigo_cliente:d.codigo_cliente,qtd_2024:d.qtd_compras_2024,qtd_2025:d.qtd_compras_2025,tipo_qtd_2024:typeof d.qtd_compras_2024,tipo_qtd_2025:typeof d.qtd_compras_2025,tem_qtd_2024:"qtd_compras_2024"in d,tem_qtd_2025:"qtd_compras_2025"in d,valor_exato_2024:d.qtd_compras_2024,valor_exato_2025:d.qtd_compras_2025,dados_completos:d})}catch(d){console.error("❌ Erro ao carregar cliente:",d);let f=`Erro ao carregar dados do cliente ID ${l}`;d instanceof Error?f+=`

Detalhes do erro: ${d.message}`:typeof d=="object"&&d!==null&&(f+=`

Detalhes: ${JSON.stringify(d,null,2)}`),p(f)}finally{u(!1),console.log("🏁 Loading finalizado")}}j()},[l]),m)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dados do cliente..."})]})});if(n)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-2xl mx-auto p-6",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsx("pre",{className:"text-red-600 text-sm text-left whitespace-pre-wrap",children:n})}),e.jsx("button",{onClick:()=>s("/clientes"),className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90",children:"Voltar para Clientes"})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Cliente não encontrado"}),e.jsx("button",{onClick:()=>s("/clientes"),className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90",children:"Voltar para Clientes"})]})});const i={nome:r.nome_fantasia,status:r.status_financeiro,codigo:r.codigo_cliente,dsv:r.dias_sem_comprar,vendas2025:r.valor_vendas_2025,vendas2024:r.valor_vendas_2024,oportunidade:r.oportunidade,meta:r.meta_2025,qtdVendas2025:r.qtd_compras_2025??0,qtdVendas2024:r.qtd_compras_2024??0,percentualMeta:r.percentual_atingimento,acaoRecomendada:r.acao_recomendada,celular:r.celular||"",statusErp:r.status_erp,statusErpDesc:r.status_erp_desc,statusComercial:r.status_comercial,statusDisplay:r.status_display,limiteCredito:r.valor_limite_credito,saldoUtilizado:r.saldo_utilizado,limiteDisponivel:r.limite_disponivel},N=js(r);return console.log("Cliente ID:",l),console.log("Dados do cliente:",i),console.log("🔍 DEBUG FINAL - Quantidades:",{qtdVendas2025_final:i.qtdVendas2025,qtdVendas2024_final:i.qtdVendas2024,tipo_qtd_2025:typeof i.qtdVendas2025,tipo_qtd_2024:typeof i.qtdVendas2024,origem_qtd_2025:r.qtd_compras_2025,origem_qtd_2024:r.qtd_compras_2024}),console.log("Métricas categoria:",N),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-primary text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-14 relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>s("/clientes"),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors mr-2",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex items-center absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-lg font-bold",children:"Copiloto"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t?.apelido||t?.nome||t?.email||"Usuário"})]}),e.jsx("button",{onClick:()=>{o(),s("/")},className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx($,{className:"h-4 w-4"})})]})]})})}),e.jsx("main",{className:"max-w-4xl mx-auto px-3 sm:px-6 lg:px-8 py-4 lg:py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:[e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:i.nome}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${i.status==="ADIMPLENTE"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.status})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"DSV:"}),e.jsxs("span",{className:"text-xs font-semibold text-red-600",children:[i.dsv,"d"]})]})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2 leading-tight",children:["Cód: ",i.codigo]})]}),e.jsx("div",{className:"mb-4 pb-4 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs leading-tight",children:[e.jsxs("div",{className:"leading-tight",children:[e.jsx("span",{className:"text-gray-600",children:"2025: "}),e.jsx("span",{className:"font-semibold",children:V(i.vendas2025)})]}),e.jsx("div",{className:"text-right leading-tight",children:e.jsxs("span",{className:"text-gray-600",children:["Qnt: ",i.qtdVendas2025]})}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("span",{className:"text-gray-600",children:"2024: "}),e.jsx("span",{className:"font-semibold",children:V(i.vendas2024)})]}),e.jsx("div",{className:"text-right leading-tight",children:e.jsxs("span",{className:"text-gray-600",children:["Qnt: ",i.qtdVendas2024]})}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("span",{className:"text-green-600",children:"Oport: "}),e.jsx("span",{className:"font-semibold text-green-700",children:V(i.oportunidade)})]}),e.jsx("div",{}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("span",{className:"text-blue-600",children:"Meta: "}),e.jsx("span",{className:"font-semibold text-blue-700",children:V(i.meta)})]}),e.jsx("div",{className:"text-right leading-tight",children:e.jsxs("span",{className:"text-gray-600",children:["Ating: ",gs(i.percentualMeta)]})})]})}),e.jsxs("div",{className:"mb-4 pb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Mix de Produtos"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:N.categorias.length>0?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:"pb-2 text-xs font-medium text-gray-700"}),e.jsx("th",{className:"pb-2 text-right text-xs font-medium text-gray-700",children:"OB"}),e.jsx("th",{className:"pb-2 text-right text-xs font-medium text-gray-700",children:"PW"})]})}),e.jsxs("tbody",{children:[N.categorias.map((j,d)=>e.jsxs("tr",{className:"border-t border-gray-200",children:[e.jsx("td",{className:"py-2 text-xs font-medium text-gray-900",children:j.nome}),e.jsx("td",{className:"py-2 text-right text-xs font-semibold text-gray-900",children:j.ob}),e.jsx("td",{className:"py-2 text-right text-xs font-semibold text-gray-900",children:j.pw})]},d)),e.jsxs("tr",{className:"border-t-2 border-gray-400 font-bold",children:[e.jsx("td",{className:"pt-2 text-xs font-bold text-gray-900",children:"TOTAL"}),e.jsx("td",{className:"pt-2 text-right text-xs font-bold text-gray-900",children:N.totais.ob}),e.jsx("td",{className:"pt-2 text-right text-xs font-bold text-gray-900",children:N.totais.pw})]})]})]}):e.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Nenhum produto encontrado para este cliente"})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>{i.celular?window.location.href=`tel:${i.celular}`:alert("Cliente sem telefone cadastrado")},className:`w-full py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${i.celular?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!i.celular,children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:i.celular?`Ligar (${fs(i.celular)})`:"Sem telefone"})]}),e.jsxs("button",{onClick:()=>{if(i.celular){const j=i.celular.replace(/\D/g,""),d=j.startsWith("55")?j:`55${j}`;window.open(`https://wa.me/${d}`,"_blank")}else alert("Cliente sem WhatsApp cadastrado")},className:`w-full py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${i.celular?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!i.celular,children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:i.celular?"WhatsApp":"Sem WhatsApp"})]}),e.jsxs("button",{disabled:!0,className:"w-full bg-gray-400 text-white py-2.5 rounded-lg cursor-not-allowed flex items-center justify-center gap-2 opacity-50",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Gravar Áudio (Em breve)"})]})]})})]})})]})},bs=()=>{const s=E(),{user:t,logout:o}=C();M();const[l,r]=x.useState(""),[c,m]=x.useState(!1),[u,n]=x.useState("nome"),p=a=>a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").toLowerCase().trim(),i=a=>{const h=new Date,k=new Date(a.split("/").reverse().join("-")),_=h.getTime()-k.getTime();return Math.floor(_/(1e3*60*60*24))},N=a=>a>30?{status:"Crítico",statusColor:"bg-red-100 text-red-800"}:a>15?{status:"Alto",statusColor:"bg-orange-100 text-orange-800"}:a>7?{status:"Médio",statusColor:"bg-yellow-100 text-yellow-800"}:{status:"Baixo",statusColor:"bg-blue-100 text-blue-800"},f=[{id:1,nome:"Ótica Vision Plus",codigo:"100789",rota:"Centro",valorTotal:"R$ 25.430,00",ultimoPagamento:"15/11/2024",telefone:"(85) 99999-1234",titulosAbertos:[{vencimento:"15/11/2024",valor:"R$ 12.500,00"},{vencimento:"30/11/2024",valor:"R$ 8.200,00"},{vencimento:"15/12/2024",valor:"R$ 4.730,00"}]},{id:2,nome:"Ótica São Paulo",codigo:"100567",rota:"Norte",valorTotal:"R$ 18.750,00",ultimoPagamento:"30/11/2024",telefone:"(85) 98888-5678",titulosAbertos:[{vencimento:"30/11/2024",valor:"R$ 10.000,00"},{vencimento:"15/12/2024",valor:"R$ 8.750,00"}]},{id:3,nome:"Ótica Moderna",codigo:"100234",rota:"Sul",valorTotal:"R$ 12.300,00",ultimoPagamento:"15/12/2024",telefone:"(85) 97777-9101",titulosAbertos:[{vencimento:"15/12/2024",valor:"R$ 7.800,00"},{vencimento:"30/12/2024",valor:"R$ 4.500,00"}]},{id:4,nome:"Ótica Elite",codigo:"100345",rota:"Leste",valorTotal:"R$ 8.920,00",ultimoPagamento:"22/12/2024",telefone:"(85) 96666-1122",titulosAbertos:[{vencimento:"22/12/2024",valor:"R$ 8.920,00"}]}].map(a=>{const h=a.titulosAbertos.map(ae=>i(ae.vencimento)),k=Math.max(...h),{status:_,statusColor:A}=N(k);return{...a,diasAtraso:k,status:_,statusColor:A}}).filter(a=>{const h=p(l);return p(a.nome).includes(h)||p(a.codigo).includes(h)||p(a.rota).includes(h)}).sort((a,h)=>{switch(u){case"rota":return a.rota.localeCompare(h.rota);case"valor-maior":return parseFloat(h.valorTotal.replace("R$ ","").replace(".","").replace(",","."))-parseFloat(a.valorTotal.replace("R$ ","").replace(".","").replace(",","."));case"valor-menor":return parseFloat(a.valorTotal.replace("R$ ","").replace(".","").replace(",","."))-parseFloat(h.valorTotal.replace("R$ ","").replace(".","").replace(",","."));case"az":return a.nome.localeCompare(h.nome);case"za":return h.nome.localeCompare(a.nome);default:return a.nome.localeCompare(h.nome)}}),g=f.length,v=f.reduce((a,h)=>a+parseFloat(h.valorTotal.replace("R$ ","").replace(".","").replace(",",".")),0),w=f.filter(a=>a.diasAtraso>30).length;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-primary text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-14 relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>s("/dashboard"),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors mr-2",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex items-center absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-lg font-bold",children:"Copiloto"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t?.apelido||t?.nome||t?.email||"Usuário"})]}),e.jsx("button",{onClick:()=>{o(),s("/")},className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx($,{className:"h-4 w-4"})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 lg:py-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(O,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Clientes Inadimplentes"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 sm:gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 mb-1",children:"Total Inadimplentes"}),e.jsx("p",{className:"text-sm sm:text-lg font-bold text-red-600",children:g})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 mb-1",children:"Valor Total"}),e.jsxs("p",{className:"text-sm sm:text-lg font-bold text-red-600",children:["R$ ",v.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 mb-1",children:"Críticos (>30d)"}),e.jsx("p",{className:"text-sm sm:text-lg font-bold text-red-600",children:w})]})]}),e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar inadimplentes...",value:l,onChange:a=>r(a.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",onClick:()=>m(!c),children:e.jsx(ee,{className:"h-4 w-4 text-gray-600"})}),c&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-32",children:[e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{n("rota"),m(!1)},children:"Rota"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{n("valor-maior"),m(!1)},children:"Maior Valor"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{n("valor-menor"),m(!1)},children:"Menor Valor"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50 border-b border-gray-200",onClick:()=>{n("az"),m(!1)},children:"A-Z"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs text-left hover:bg-gray-50",onClick:()=>{n("za"),m(!1)},children:"Z-A"})]})]})]}),e.jsx("div",{className:"space-y-3",children:f.map(a=>e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-gray-300 transition-all",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1.5",children:[e.jsx(O,{className:"h-4 w-4 text-red-500"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:a.nome}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${a.statusColor}`,children:a.status})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2 leading-tight",children:["Código: ",a.codigo]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs leading-tight mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-red-600",children:"Valor Total:"}),e.jsx("span",{className:"ml-1 font-semibold text-red-700",children:a.valorTotal})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-600",children:"Rota:"}),e.jsx("span",{className:"ml-1 font-semibold text-gray-800",children:a.rota})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-2 mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Títulos Atrasados:"}),e.jsx("div",{className:"space-y-1",children:a.titulosAbertos.map((h,k)=>{const _=i(h.vencimento);return e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs items-center",children:[e.jsx("span",{className:"text-gray-600",children:h.vencimento}),e.jsxs("span",{className:"text-center text-red-600 font-medium",children:[_,"d"]}),e.jsx("span",{className:"font-semibold text-red-600 text-right",children:h.valor})]},k)})})]}),e.jsx("div",{className:"border-t border-gray-100 pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>window.open(`tel:${a.telefone}`,"_self"),className:"w-full bg-primary text-white py-2 sm:py-2.5 rounded-lg font-medium hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Ligar"})]}),e.jsxs("button",{onClick:()=>window.open(`https://wa.me/${a.telefone.replace(/\D/g,"")}`,"_blank"),className:"w-full bg-green-600 text-white py-2 sm:py-2.5 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"WhatsApp"})]})]})})]})},a.id))})]})]})},S=({children:s})=>{const{user:t,loading:o}=C();return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando..."})]})}):t?e.jsx(e.Fragment,{children:s}):e.jsx(ce,{to:"/",replace:!0})},ys=de([{path:"/",element:e.jsx(is,{})},{path:"/dashboard",element:e.jsx(S,{children:e.jsx(R,{children:e.jsx(cs,{})})})},{path:"/clientes",element:e.jsx(S,{children:e.jsx(R,{children:e.jsx(xs,{})})})},{path:"/rotas",element:e.jsx(S,{children:e.jsx(R,{children:e.jsx(hs,{})})})},{path:"/cidades",element:e.jsx(S,{children:e.jsx(R,{children:e.jsx(us,{})})})},{path:"/clientes/detalhes/:id",element:e.jsx(S,{children:e.jsx(R,{children:e.jsx(Ns,{})})})},{path:"/inadimplentes",element:e.jsx(S,{children:e.jsx(R,{children:e.jsx(bs,{})})})}]);function vs(){return e.jsx(Re,{children:e.jsx(me,{router:ys})})}je.createRoot(document.getElementById("root")).render(e.jsx(xe.StrictMode,{children:e.jsx(vs,{})}));
